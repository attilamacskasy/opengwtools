attila@attila-ubuntu-24-desktop:~/opengwtools/proxmox$ ./deploy_chr.sh 

=== MikroTik CHR Proxmox Utility ===
Target host : root@172.22.22.252
VM name     : chr-terraform-lab (ID: auto)
Image ver.  : 7.20.1
Storage     : local-lvm on pve-01

1) Deploy / Update CHR VM
2) Destroy CHR VM
3) Edit configuration
4) Exit

Creative spark, AI prompting, and continuous debugging by: Attila Macskasy
Code generated using: GPT-5 Codex (Preview) — Premium Model x1

Select an option [1-4]: 1
[deploy-chr] Connecting to root@172.22.22.252 (password prompt may appear)...
root@172.22.22.252's password: 
[deploy-chr] Preparing deployment for VM 115 (chr-terraform-lab)
[deploy-chr] Downloading MikroTik CHR 7.20.1 raw image archive...
[deploy-chr] Extracting raw disk image...
[deploy-chr] Ensuring remote image directory /var/lib/vz/template/iso exists...
[deploy-chr] remote: mkdir -p '/var/lib/vz/template/iso'
[deploy-chr] Uploading image to Proxmox host... chr-7.20.1.img 100%  128MB  52.5MB/s   00:02    
[deploy-chr] Converting raw image on Proxmox host (raw output)...
[deploy-chr] remote: rm -f '/var/lib/vz/template/iso/chr-7.20.1.raw'
[deploy-chr] remote: qemu-img convert -f raw -O raw '/var/lib/vz/template/iso/chr-7.20.1.img' '/var/lib/vz/template/iso/chr-7.20.1.raw'
[deploy-chr] remote: chmod 644 '/var/lib/vz/template/iso/chr-7.20.1.raw'
[deploy-chr] remote: rm -f '/var/lib/vz/template/iso/chr-7.20.1.img'
[deploy-chr] Creating VM 115 (chr-terraform-lab)...
[deploy-chr] remote: qm create 115 --name chr-terraform-lab --memory 512 --cores 1 --sockets 1 --net0 virtio,bridge=vmbr0 --ostype l26 --onboot 1 --scsihw virtio-scsi-pci --boot c
[deploy-chr] Importing CHR disk into storage local-lvm...
[deploy-chr] remote: qm importdisk 115 /var/lib/vz/template/iso/chr-7.20.1.raw local-lvm --format raw
importing disk '/var/lib/vz/template/iso/chr-7.20.1.raw' to VM 115 ...
  Logical volume "vm-115-disk-0" created.
  Logical volume pve/vm-115-disk-0 changed.
transferred 0.0 B of 128.0 MiB (0.00%)
transferred 6.2 MiB of 128.0 MiB (4.84%)
transferred 12.3 MiB of 128.0 MiB (9.61%)
transferred 16.2 MiB of 128.0 MiB (12.66%)
transferred 22.3 MiB of 128.0 MiB (17.43%)
transferred 28.4 MiB of 128.0 MiB (22.20%)
transferred 34.5 MiB of 128.0 MiB (26.98%)
transferred 40.6 MiB of 128.0 MiB (31.75%)
transferred 46.7 MiB of 128.0 MiB (36.52%)
transferred 52.9 MiB of 128.0 MiB (41.29%)
transferred 59.0 MiB of 128.0 MiB (46.07%)
transferred 65.1 MiB of 128.0 MiB (50.84%)
transferred 69.0 MiB of 128.0 MiB (53.89%)
transferred 76.0 MiB of 128.0 MiB (59.41%)
transferred 82.2 MiB of 128.0 MiB (64.19%)
transferred 88.3 MiB of 128.0 MiB (68.96%)
transferred 94.4 MiB of 128.0 MiB (73.73%)
transferred 100.5 MiB of 128.0 MiB (78.50%)
transferred 103.5 MiB of 128.0 MiB (80.84%)
transferred 109.6 MiB of 128.0 MiB (85.65%)
transferred 115.8 MiB of 128.0 MiB (90.43%)
transferred 121.9 MiB of 128.0 MiB (95.20%)
transferred 128.0 MiB of 128.0 MiB (99.97%)
transferred 128.0 MiB of 128.0 MiB (100.00%)
transferred 128.0 MiB of 128.0 MiB (100.00%)
unused0: successfully imported disk 'local-lvm:vm-115-disk-0'
[deploy-chr] Attaching imported disk and configuring boot order...
[deploy-chr] remote: qm set 115 --scsihw virtio-scsi-pci --scsi0 local-lvm:vm-115-disk-0 --boot order=scsi0 --vga std --ide2 none,media=cdrom --agent enabled=1,fstrim_cloned_disks=1
update VM 115: -agent enabled=1,fstrim_cloned_disks=1 -boot order=scsi0 -ide2 none,media=cdrom -scsi0 local-lvm:vm-115-disk-0 -scsihw virtio-scsi-pci -vga std
[deploy-chr] Removing uploaded image to free space...
[deploy-chr] remote: rm -f '/var/lib/vz/template/iso/chr-7.20.1.raw'
[deploy-chr] Starting CHR VM...
[deploy-chr] remote: qm start 115
[deploy-chr] Deployment complete. Access the VM console via Proxmox GUI or 'qm terminal 115'.

=== MikroTik CHR Proxmox Utility ===
Target host : root@172.22.22.252
VM name     : chr-terraform-lab (ID: auto)
Image ver.  : 7.20.1
Storage     : local-lvm on pve-01

1) Deploy / Update CHR VM
2) Destroy CHR VM
3) Edit configuration
4) Exit

Creative spark, AI prompting, and continuous debugging by: Attila Macskasy
Code generated using: GPT-5 Codex (Preview) — Premium Model x1

Select an option [1-4]: 4
[deploy-chr] Exiting.
attila@attila-ubuntu-24-desktop:~/opengwtools/proxmox$